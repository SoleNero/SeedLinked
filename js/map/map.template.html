<!-- MAIN CONTAINER -->
<div layout="column" layout-margin>
    <div map-lazy-load="http://maps.google.com/maps/api/js?key=AIzaSyBEFCJEB2PAORJilE22B76k071qkgz7_Ww" map-lazy-load-params="{{vm.googleMapsUrl}}">
        <div id="google-map-tab" flex>
            <ng-map flex zoom="4" center="[40.01, -95.27]" style="height:45.5vw; width:50vw;">
                <marker id="{{id}}" position="[{{city.lat}}, {{city.lng}}]" ng-repeat="(id,city) in $ctrl.results" on-click="$ctrl.showCity(event,id)">
                </marker>
                <info-window id="info-window" max-with="200">
                    <div ng-non-bindable="">
                        <strong>City:</strong> {{$ctrl.currentCity.city_name}}<br/> <strong>Species:</strong> {{$ctrl.currentCity.species}}<br/> <strong>Variety:</strong>
                        </br>
                        <ul>
                            <li ng-repeat="fruit in $ctrl.currentCity.variety_name track by $index">
                                <a ui-sref="variety({id:fruit})">{{fruit}}</a>
                            </li>
                        </ul>
                    </div>
                </info-window>
            </ng-map>
            <!--filter-->
            <div flex class="filter-container">
              <h1 class="md-title">Search For <span class="seed-varieties">Seed Varieties</span></h1>
                <md-input-container>
                    <!--<label>{{}}</label>-->
                    <md-select ng-model="$ctrl.selectedItem" ng-change="$ctrl.demoFunc()">
                        <md-optgroup label="tomato varieties">
                            <md-option ng-value="item" ng-repeat="item in $ctrl.varieties" ng-cloak>{{item.variety_name}}</md-option>
                        </md-optgroup>
                    </md-select>
                </md-input-container>
                <div>
                    <h1 class="title-city" ng-if="$ctrl.selectedItem">This variety is grown in the following cities:</h1>
                    <li class="selected_varieties" ng-repeat="selected in $ctrl.selectedItem.city_name">
                        {{selected}}
                    </li>
                    <!--you're seed we're found in-->
                    <!--<p ng-if="$ctr.selectedItem == $ctrl.data.variety_name" ng-repeat="(id, variety_name) in $ctrl.data">{{$ctrl.data.id.city_name}}</p>                -->
                </div>
            </div>
        </div>
    </div>
</div>

<!--fix it ^, query db-->

<!--<div flex class="filter-container">
                <h1 class="md-title"> Pick the variety</h1>
                    <md-input-container>-->
<!--<label>{{}}</label>-->
<!--<md-select ng-model="$ctrl.selectedItem" ng-change="$ctrl.getSelectedText()">
                            <md-optgroup label="varieties">
                                <md-option ng-value="item" ng-repeat="item in $ctrl.varieties" ng-cloak>{{item.variety_name}}</md-option>
                            </md-optgroup>
                        </md-select>
                    </md-input-container>
                    <div>
                <p>{{$ctrl.selectedItem}}</p>-->
<!--<p ng-if="$ctr.selectedItem == $ctrl.data.variety_name" ng-repeat="(id, variety_name) in $ctrl.data">{{$ctrl.data.id.city_name}}</p>                -->
<!--</div>
            </div>  -->